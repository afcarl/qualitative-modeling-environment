function saveShape(){var a={":id":this.id,":x":this.attr("x"),":y":this.attr("y"),":w":this.attr("width"),":h":this.attr("height")};if(zoomTimes!=1&&this.zx!=null){a[":x"]=this.zx;a[":y"]=this.zy;a[":w"]=this.zw;a[":h"]=this.zh}var b="UPDATE placement SET x=:x, y=:y, width=:w, height=:h WHERE entity=:id",c=this.paper,d=this.id,e=this.name,f=c.message("Saving..."),g=c.sUrl;$.post(c.sUrl,{query:b,data:a},function(a){setTimeout(function(){f.text.remove();f.remove();saveShapeName(d,e,g)},10)})}function saveShapeName(a,b,c){var d="UPDATE entity SET name=:name WHERE id=:id",e={":id":a,":name":b};$.post(c,{query:d,data:e},function(a){})}function saveEntity(a,b,c,d){d=parseInt(d);b=parseInt(b);var e=null,f=null,g=null,h=50,i=30;if(modelPaper.allShapes[b]==null){f=20;g=20}else{e=modelPaper.allShapes[b];f=e.attr("x")+10;g=e.attr("y")+10}var j={name:a,loc:b,kind:c,model:d,x:f,y:g,w:h,h:i};$.post(modelPaper.dbUrls.entity,j,function(a){console.log(a);clearEverything()})}function saveHypothesis(a,b,c,d){var e="INSERT INTO link VALUES (NULL, :start, :type, :end, :model)";a=parseInt(a);c=parseInt(c);d=parseInt(d);var f={":start":a,":type":b,":end":c,":model":d};$.post(modelPaper.sUrl,{query:e,data:f},function(a){clearEverything()})}function saveFact(a,b,c,d){var e="INSERT INTO fact VALUES (NULL, :start, :type, :end, :model)";a=parseInt(a);c=parseInt(c);d=parseInt(d);var f={":start":a,":type":b,":end":c,":model":d};$.post(modelPaper.sUrl,{query:e,data:f},function(a){clearEverything()})}function deleteItem(a){var b,c=a.substring(0,1),d={p:"entity",r:"entity",l:"link",f:"fact"},b=d[c],a=parseInt(a.replace(c,""));c=="p"?deletePlace(a):c=="r"?deleteEntity(a):c=="l"?deleteLink(a):c=="f"&&deleteFact(a)}function deletePlace(a){var b="../includes/php/deletePlace.php";$.post(b,{id:a},function(a){console.log(a);$("a.close-reveal-modal").click();clearEverything();$("#myModal a").click()})}function deleteEntity(a){var b="../includes/php/deleteEntity.php";$.post(b,{id:a},function(a){console.log(a);$("a.close-reveal-modal").click();clearEverything();$("#myModal a").click()})}function deleteLink(a){var b="../includes/php/deleteLink.php";$.post(b,{id:a},function(a){console.log(a);$("a.close-reveal-modal").click();clearEverything();$("#myModal a").click()})}function deleteFact(a){var b="../includes/php/deleteFact.php";$.post(b,{id:a},function(a){console.log(a);$("a.close-reveal-modal").click();clearEverything();$("#myModal a").click()})};
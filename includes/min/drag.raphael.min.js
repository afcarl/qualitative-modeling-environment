function placeDrag(){var a=function(){this.ox=this.attr("x");this.oy=this.attr("y");this.oo=this.attr("opacity");this.text.ox=this.text.attr("x");this.text.oy=this.text.attr("y");this.handle.ox=this.handle.attr("cx");this.handle.oy=this.handle.attr("cy");this.handle.oo=this.handle.attr("opacity");this.attr("opacity",.5);this.handle.attr("opacity",.5);this.toFront();this.text.toFront();this.handle.toFront();var a=null;for(a=0;a<this.children.length;a++)this.children[a].start()},b=function(a,b){this.attr({x:this.ox+a,y:this.oy+b});this.text.attr({x:this.text.ox+a,y:this.text.oy+b});this.handle.attr({cx:this.handle.ox+a,cy:this.handle.oy+b});var c=null;for(c=0;c<this.children.length;c++)this.children[c].move(a,b)},c=function(){this.attr("opacity",this.oo);this.handle.attr("opacity",this.handle.oo);this.save();var a=null;for(a=0;a<this.children.length;a++)this.children[a].end();var b=this.getPair();b.attr({x:this.attr("x"),y:this.attr("y"),height:this.attr("height"),width:this.attr("width")});b.handle.attr({cx:this.handle.attr("cx"),cy:this.handle.attr("cy")});b.text.attr({x:this.text.attr("x"),y:this.text.attr("y")});var c=null};return{start:a,move:b,end:c}}function handleDrag(){var a=function(){this.ox=this.attr("cx");this.oy=this.attr("cy");this.parent.ow=this.parent.attr("width");this.parent.oh=this.parent.attr("height");this.parent.text.ox=this.parent.text.attr("x");this.parent.text.oy=this.parent.text.attr("y")},b=function(a,b){var c=this.parent.ow+a,d=this.parent.oh+b;this.attr({cx:this.ox+a,cy:this.oy+b});this.parent.attr({width:c,height:d});this.parent.text.attr({x:this.paper.center(this.parent).cx})},c=function(){this.parent.save();var a=this.parent.getPair();a.attr({x:this.parent.attr("x"),y:this.parent.attr("y"),width:this.parent.attr("width"),height:this.parent.attr("height")});a.handle.attr({cx:this.attr("cx"),cy:this.attr("cy")});a.text.attr({x:this.parent.text.attr("x"),y:this.parent.text.attr("y")})};return{start:a,move:b,end:c}}function entityDrag(){var a=function(){this.ox=this.attr("x");this.oy=this.attr("y");this.oo=this.attr("opacity");this.text.ox=this.text.attr("x");this.text.oy=this.text.attr("y");this.toFront();this.text.toFront();this.attr("opacity",.5);var a=null;for(a=0;a<this.links.length;a++)this.links[a].fadeOut();var b=null;for(b=0;b<this.assoc.length;b++)this.assoc[b].fadeOut()},b=function(a,b){var c=this.getPair();this.attr({x:this.ox+a,y:this.oy+b});this.text.attr({x:this.text.ox+a,y:this.text.oy+b})},c=function(){var a=this.getPair();this.attr("opacity",this.oo);this.save();this.toFront();this.text.toFront();var b=null,c=null;for(c=0;c<a.links.length;c++)a.links[c].fadeOut();a.attr({x:this.attr("x"),y:this.attr("y")});var c=null;for(c=0;c<a.links.length;c++){a.links[c].fadeIn();a.links[c].redraw()}a.text.attr({x:this.text.attr("x"),y:this.text.attr("y")});for(b=0;b<this.links.length;b++){var d=this.links[b];d.fadeIn();d.redraw()}var c;for(c=0;c<this.assoc.length;c++){this.assoc[c].fadeIn();this.assoc[c].redraw()}this.paper.fadeIn()};return{start:a,move:b,end:c}};